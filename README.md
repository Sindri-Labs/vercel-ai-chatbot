# Vercel AI Chatbot
This is a clone of [Vercel's AI Chatbot](https://vercel.com/templates/next.js/nextjs-ai-chatbot) at commit [7d8e713](https://github.com/vercel/ai-chatbot/tree/7d8e71383f55c766ca575da2cac0a8d89283c031), which still uses the OpenAI `/v1/chat/completions` instead of the newer `/v1/responses` endpoint.

## Running locally

### Setup
Configure your environment variable file that will be used with Docker Compose:
```bash
cp .env.example.sindri .env
```
Then, edit your `.env` file with your configuration.

The `.env` file can be configured to either point to OpenAI directly or to Sindri's OpenAI-compatible API.

To use Sindri, uncomment the lower section.
You must also use a Sindri API Key in the `OPENAI_API_KEY` section. This can be generated by first [creating a Sindri account](https://sindri.app/signup) then visiting the [API Keys page](https://sindri.app/z/me/page/settings/api-keys).

Furthermore, when using Sindri, `BLOB_READ_WRITE_TOKEN` is not yet needed, file uploads are not yet supported, and "tools" are not yet supported.

### Running
Build and run the application:
```bash
docker compose --env-file .env up --build
```

The application will be available at [localhost:3000](http://localhost:3000).

### Environment Variables

| Variable | Description | Default |
|----------|-------------|---------|
| `AUTH_SECRET` | JWT encryption secret | ***Required*** (create with `openssl rand -base64 32`) |
| `BLOB_READ_WRITE_TOKEN` | Vercel Blob Storage key | ***Required*** |
| `MAX_COMPLETION_TOKENS` | Maximum tokens for responses | `1000` |
| `OPENAI_API_KEY` | Your OpenAI API key | ***Required*** |
| `OPENAI_BASE_URL` | Custom OpenAI-compatible endpoint | `https://api.openai.com/v1` |
| `OPENAI_MODEL` | Model to use for chat completions | `gpt-4o-mini` |
| `PORT` | Port the server is exposed | `3000` |
| `SINDRI_BASE_URL` | Sindri OpenAI-compatible endpoint | `https://sindri.app/api/ai/v1/openai` |
| `USE_TOOLS` | Enable AI tools (weather, documents, etc.) | `false` |

## Key Modifications

- **Docker Deployment**: Complete containerized setup with PostgreSQL and Redis
- **OpenAI Integration**: Switched from xAI to OpenAI with configurable base URL
- **PDF Support**: Added PDF and JSON file upload support (up to 100MB)
- **Authentication**: Fixed auth flow and added guest mode
- **Environment Variables**: All configuration via Docker environment variables
